{
  "chartExports": [
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Number of traces processed in the 100 most active workflows",
        "id": "Em-XVZjAYC8",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Requests from Top Workflows",
        "options": {
          "areaChartOptions": {
            "showDataMarkers": false
          },
          "axes": [
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            },
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            }
          ],
          "axisPrecision": null,
          "colorBy": "Dimension",
          "defaultPlotType": "AreaChart",
          "eventPublishLabelOptions": [],
          "histogramChartOptions": {
            "colorThemeIndex": 16
          },
          "includeZero": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": false,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              }
            ]
          },
          "lineChartOptions": {
            "showDataMarkers": false
          },
          "onChartLegendOptions": {
            "dimensionInLegend": null,
            "showLegend": false
          },
          "programOptions": {
            "disableSampling": true,
            "maxDelay": null,
            "minimumResolution": 10000,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "requests",
              "label": "A",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": "",
              "valueSuffix": "",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "showEventLines": false,
          "stacked": true,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "TimeSeriesChart",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "A = data('workflows.count', filter=filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*')), rollup='sum').sum(by=['sf_workflow', 'sf_environment']).top(count=100).publish(label='A')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Longest running workflows, based on last minute 90th percentile",
        "id": "Em-XVZjAYDA",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Top Workflows by Duration (P90)",
        "options": {
          "colorBy": "Dimension",
          "colorScale2": null,
          "hideMissingValues": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": false,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              },
              {
                "enabled": true,
                "property": "sf_operation"
              },
              {
                "enabled": true,
                "property": "sf_service"
              },
              {
                "enabled": true,
                "property": "sf_httpMethod"
              }
            ]
          },
          "maximumPrecision": null,
          "programOptions": {
            "disableSampling": true,
            "maxDelay": 0,
            "minimumResolution": 0,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "Workflow Duration",
              "label": "p90",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": "Nanosecond",
              "yAxis": 0
            }
          ],
          "refreshInterval": null,
          "secondaryVisualization": "None",
          "sortBy": "-value",
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "List",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "def weighted_duration(base, p, filter_, groupby):\n    error_durations     = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'true'),  rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_durations = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'false'), rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_counts     = data(base + '.count', filter=filter_ and filter('sf_error', 'true'),  rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_counts = data(base + '.count', filter=filter_ and filter('sf_error', 'false'), rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_weight     = (error_durations * error_counts).sum(over='1m')\n    non_error_weight = (non_error_durations * non_error_counts).sum(over='1m')\n\n    total_weight = combine((error_weight if error_weight is not None else 0) + (non_error_weight if non_error_weight is not None else 0))\n    total = combine((error_counts if error_counts is not None else 0) + (non_error_counts if non_error_counts is not None else 0)).sum(over='1m')\n    return (total_weight / total)\n\nfilter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\ngroupby = ['sf_environment', 'sf_workflow']\nweighted_duration('workflows', 'p90', filter_, groupby).top(100).publish(label='p90')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "90th percentile duration of traces from the 100 longest workflows",
        "id": "Em-XVZjAYDE",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "P90 Duration of Top Workflows",
        "options": {
          "areaChartOptions": {
            "showDataMarkers": false
          },
          "axes": [
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            },
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            }
          ],
          "axisPrecision": null,
          "colorBy": "Dimension",
          "defaultPlotType": "LineChart",
          "eventPublishLabelOptions": [],
          "histogramChartOptions": {
            "colorThemeIndex": 16
          },
          "includeZero": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": true,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              }
            ]
          },
          "lineChartOptions": {
            "showDataMarkers": false
          },
          "onChartLegendOptions": {
            "dimensionInLegend": null,
            "showLegend": false
          },
          "programOptions": {
            "disableSampling": true,
            "maxDelay": null,
            "minimumResolution": 10000,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "Workflow Duration",
              "label": "p90",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": "Nanosecond",
              "yAxis": 0
            }
          ],
          "showEventLines": false,
          "stacked": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "TimeSeriesChart",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "def weighted_duration(base, p, filter_, groupby):\n    error_durations     = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'true'),  rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_durations = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'false'), rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_counts     = data(base + '.count', filter=filter_ and filter('sf_error', 'true'),  rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_counts = data(base + '.count', filter=filter_ and filter('sf_error', 'false'), rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_weight     = (error_durations * error_counts).sum(over='1m')\n    non_error_weight = (non_error_durations * non_error_counts).sum(over='1m')\n\n    total_weight = combine((error_weight if error_weight is not None else 0) + (non_error_weight if non_error_weight is not None else 0))\n    total = combine((error_counts if error_counts is not None else 0) + (non_error_counts if non_error_counts is not None else 0)).sum(over='1m')\n    return (total_weight / total)\n\nfilter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\ngroupby = ['sf_environment', 'sf_workflow']\nweighted_duration('workflows', 'p90', filter_, groupby).top(100).publish(label='p90')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Most active workflows by number of traces in the last minute",
        "id": "Em-XVZjAYDI",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Top Workflows by Requests",
        "options": {
          "colorBy": "Dimension",
          "colorScale2": null,
          "hideMissingValues": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": false,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              }
            ]
          },
          "maximumPrecision": null,
          "programOptions": {
            "disableSampling": true,
            "maxDelay": 0,
            "minimumResolution": 0,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "A",
              "label": "A",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "refreshInterval": null,
          "secondaryVisualization": "None",
          "sortBy": "-value",
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "List",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "A = data('workflows.count', filter=filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*')), rollup='sum').sum(by=['sf_workflow', 'sf_environment']).sum(over='1m').top(count=100).publish(label='A')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Most erroneous workflows (1-minute error rate average)",
        "id": "Em-XVZjAYDM",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Top Workflows by Error Rate",
        "options": {
          "colorBy": "Dimension",
          "colorScale2": null,
          "hideMissingValues": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": false,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              }
            ]
          },
          "maximumPrecision": 3,
          "programOptions": {
            "disableSampling": true,
            "maxDelay": 0,
            "minimumResolution": 0,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "A",
              "label": "A",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "B",
              "label": "B",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "C",
              "label": "C",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": "%",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "refreshInterval": null,
          "secondaryVisualization": "None",
          "sortBy": "-value",
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "List",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "filter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\nA = data('workflows.count', filter=filter_ and filter('sf_error', 'true'), rollup='rate').sum(by=['sf_environment', 'sf_workflow']).publish(label='A', enable=False)\nB = data('workflows.count', filter=filter_, rollup='rate').sum(by=['sf_environment', 'sf_workflow']).publish(label='B', enable=False)\nC = combine(100*((A if A is not None else 0)/B)).mean(over='1m').top(100).publish(label='C')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Top 100 workflows with the highest proportion of error traces",
        "id": "Em-XVZjAYDQ",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Error Rate by Workflow",
        "options": {
          "areaChartOptions": {
            "showDataMarkers": false
          },
          "axes": [
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "%",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            },
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            }
          ],
          "axisPrecision": null,
          "colorBy": "Dimension",
          "defaultPlotType": "LineChart",
          "eventPublishLabelOptions": [],
          "histogramChartOptions": {
            "colorThemeIndex": 16
          },
          "includeZero": false,
          "legendOptions": {
            "fields": null
          },
          "lineChartOptions": {
            "showDataMarkers": false
          },
          "onChartLegendOptions": {
            "dimensionInLegend": null,
            "showLegend": false
          },
          "programOptions": {
            "disableSampling": true,
            "maxDelay": null,
            "minimumResolution": 10000,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "Successful requests",
              "label": "A",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "All requests",
              "label": "B",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "Error rate",
              "label": "C",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": "%",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "showEventLines": false,
          "stacked": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "TimeSeriesChart",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "filter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\nA = data('workflows.count', filter=filter_ and filter('sf_error', 'true'), rollup='rate').sum(by=['sf_environment', 'sf_workflow']).publish(label='A', enable=False)\nB = data('workflows.count', filter=filter_, rollup='rate').sum(by=['sf_environment', 'sf_workflow']).publish(label='B', enable=False)\nC = combine(100*((A if A is not None else 0)/B)).top(100).publish(label='C')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Number of traces processed by this workflow",
        "id": "Em-XVZjAYDc",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Workflow Requests",
        "options": {
          "areaChartOptions": {
            "showDataMarkers": false
          },
          "axes": [
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            },
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            }
          ],
          "axisPrecision": null,
          "colorBy": "Dimension",
          "defaultPlotType": "LineChart",
          "eventPublishLabelOptions": [],
          "histogramChartOptions": {
            "colorThemeIndex": 16
          },
          "includeZero": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": true,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              }
            ]
          },
          "lineChartOptions": {
            "showDataMarkers": false
          },
          "onChartLegendOptions": {
            "dimensionInLegend": null,
            "showLegend": false
          },
          "programOptions": {
            "disableSampling": false,
            "maxDelay": 0,
            "minimumResolution": 10000,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "requests",
              "label": "C",
              "paletteIndex": 11,
              "plotType": null,
              "valuePrefix": "",
              "valueSuffix": "",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "showEventLines": false,
          "stacked": false,
          "time": {
            "range": 3600001,
            "type": "relative"
          },
          "type": "TimeSeriesChart",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "C = data('workflows.count', filter=filter('sf_environment', '*') and (not filter('sf_dimensionalized', '*')) and filter('sf_workflow', '*'), rollup='sum').sum(by=['sf_workflow', 'sf_environment']).publish(label='C')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Total number of traces for this workflow over time window",
        "id": "Em-XVZjAYDg",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Workflow Requests Total",
        "options": {
          "colorBy": "Dimension",
          "colorScale": null,
          "colorScale2": null,
          "maximumPrecision": 4,
          "programOptions": {
            "disableSampling": false,
            "maxDelay": 0,
            "minimumResolution": 0,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "requests",
              "label": "A",
              "paletteIndex": 11,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": "requests",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "refreshInterval": null,
          "secondaryVisualization": "None",
          "showSparkLine": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "timestampHidden": false,
          "type": "SingleValue",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "A = data('workflows.count', filter=filter('sf_environment', '*') and (not filter('sf_dimensionalized', '*')) and filter('sf_workflow', '*'), rollup='sum').sum().publish(label='A')\nB = alerts(detector_id='ElYWH0iAASI').publish(label='B')",
        "relatedDetectorIds": [
          "ElYWH0iAASI"
        ],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Error rate on traces for this workflow",
        "id": "Em-XVZjAYDk",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Workflow Error Rate",
        "options": {
          "colorBy": "Scale",
          "colorScale": null,
          "colorScale2": [
            {
              "gt": 5,
              "gte": null,
              "lt": null,
              "lte": null,
              "paletteIndex": 16
            },
            {
              "gt": 1,
              "gte": null,
              "lt": null,
              "lte": 5,
              "paletteIndex": 17
            },
            {
              "gt": 0.1,
              "gte": null,
              "lt": null,
              "lte": 1,
              "paletteIndex": 18
            },
            {
              "gt": 0,
              "gte": null,
              "lt": null,
              "lte": 0.1,
              "paletteIndex": 19
            },
            {
              "gt": null,
              "gte": null,
              "lt": null,
              "lte": 0,
              "paletteIndex": 20
            }
          ],
          "maximumPrecision": 2,
          "programOptions": {
            "disableSampling": false,
            "maxDelay": 0,
            "minimumResolution": 0,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "Successful requests",
              "label": "A",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "All requests",
              "label": "B",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "Error rate",
              "label": "C",
              "paletteIndex": 9,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": "%",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "refreshInterval": null,
          "secondaryVisualization": "None",
          "showSparkLine": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "timestampHidden": false,
          "type": "SingleValue",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "filter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\nA = data('workflows.count', filter=filter_ and filter('sf_error', 'true'), rollup='rate').sum().publish(label='A', enable=False)\nB = data('workflows.count', filter=filter_, rollup='rate').sum().publish(label='B', enable=False)\nC = combine(100*((A if A is not None else 0)/B)).publish(label='C')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "90th percentile duration for this workflow",
        "id": "Em-XVZjAYDo",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Workflow Duration (p90)",
        "options": {
          "colorBy": "Dimension",
          "colorScale": null,
          "colorScale2": null,
          "maximumPrecision": 5,
          "programOptions": {
            "disableSampling": false,
            "maxDelay": 0,
            "minimumResolution": 0,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "p90",
              "label": "p90",
              "paletteIndex": 1,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": "Nanosecond",
              "yAxis": 0
            }
          ],
          "refreshInterval": null,
          "secondaryVisualization": "None",
          "showSparkLine": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "timestampHidden": false,
          "type": "SingleValue",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "def weighted_duration(base, p, filter_, groupby):\n    error_durations     = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'true'),  rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_durations = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'false'), rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_counts     = data(base + '.count', filter=filter_ and filter('sf_error', 'true'),  rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_counts = data(base + '.count', filter=filter_ and filter('sf_error', 'false'), rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_weight     = (error_durations * error_counts).sum(over='1m')\n    non_error_weight = (non_error_durations * non_error_counts).sum(over='1m')\n\n    total_weight = combine((error_weight if error_weight is not None else 0) + (non_error_weight if non_error_weight is not None else 0))\n    total = combine((error_counts if error_counts is not None else 0) + (non_error_counts if non_error_counts is not None else 0)).sum(over='1m')\n    return (total_weight / total)\n\nfilter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\ngroupby = ['sf_environment', 'sf_workflow']\nweighted_duration('workflows', 'p90', filter_, groupby).mean().publish(label='p90')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Distribution of this workflow duration with median (p50), 90th,  99th percentiles",
        "id": "Em-XVZjAYDs",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Workflow Duration Distribution",
        "options": {
          "areaChartOptions": {
            "showDataMarkers": false
          },
          "axes": [
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            },
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            }
          ],
          "axisPrecision": null,
          "colorBy": "Metric",
          "defaultPlotType": "LineChart",
          "eventPublishLabelOptions": [],
          "histogramChartOptions": {
            "colorThemeIndex": 16
          },
          "includeZero": false,
          "legendOptions": {
            "fields": null
          },
          "lineChartOptions": {
            "showDataMarkers": false
          },
          "onChartLegendOptions": {
            "dimensionInLegend": null,
            "showLegend": false
          },
          "programOptions": {
            "disableSampling": false,
            "maxDelay": 0,
            "minimumResolution": 10000,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "median",
              "label": "median",
              "paletteIndex": 14,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": "Nanosecond",
              "yAxis": 0
            },
            {
              "displayName": "p90",
              "label": "p90",
              "paletteIndex": 1,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": "Nanosecond",
              "yAxis": 0
            },
            {
              "displayName": "p99",
              "label": "p99",
              "paletteIndex": 5,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": "Nanosecond",
              "yAxis": 0
            }
          ],
          "showEventLines": false,
          "stacked": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "TimeSeriesChart",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "def weighted_duration(base, p, filter_, groupby):\n    error_durations     = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'true'),  rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_durations = data(base + '.duration.ns.' + p, filter=filter_ and filter('sf_error', 'false'), rollup='max').mean(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_counts     = data(base + '.count', filter=filter_ and filter('sf_error', 'true'),  rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n    non_error_counts = data(base + '.count', filter=filter_ and filter('sf_error', 'false'), rollup='sum').sum(by=groupby, allow_missing=['sf_httpMethod'])\n\n    error_weight     = (error_durations * error_counts).sum(over='1m')\n    non_error_weight = (non_error_durations * non_error_counts).sum(over='1m')\n\n    total_weight = combine((error_weight if error_weight is not None else 0) + (non_error_weight if non_error_weight is not None else 0))\n    total = combine((error_counts if error_counts is not None else 0) + (non_error_counts if non_error_counts is not None else 0)).sum(over='1m')\n    return (total_weight / total)\n\nfilter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\ngroupby = ['sf_environment', 'sf_workflow']\nweighted_duration('workflows', 'median', filter_, groupby).publish(label='median')\nweighted_duration('workflows', 'p90', filter_, groupby).publish(label='p90')\nweighted_duration('workflows', 'p99', filter_, groupby).publish(label='p99')",
        "relatedDetectorIds": [],
        "tags": null
      }
    },
    {
      "chart": {
        "created": 0,
        "creator": null,
        "customProperties": {},
        "description": "Error rate on traces for this workflow",
        "id": "Em-XVZjAYDw",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "name": "Workflow Error Rate",
        "options": {
          "areaChartOptions": {
            "showDataMarkers": false
          },
          "axes": [
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "%",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            },
            {
              "highWatermark": null,
              "highWatermarkLabel": null,
              "label": "",
              "lowWatermark": null,
              "lowWatermarkLabel": null,
              "max": null,
              "min": null
            }
          ],
          "axisPrecision": null,
          "colorBy": "Dimension",
          "defaultPlotType": "LineChart",
          "eventPublishLabelOptions": [],
          "histogramChartOptions": {
            "colorThemeIndex": 16
          },
          "includeZero": false,
          "legendOptions": {
            "fields": [
              {
                "enabled": false,
                "property": "sf_originatingMetric"
              },
              {
                "enabled": true,
                "property": "sf_metric"
              },
              {
                "enabled": true,
                "property": "sf_workflow"
              },
              {
                "enabled": true,
                "property": "sf_environment"
              }
            ]
          },
          "lineChartOptions": {
            "showDataMarkers": false
          },
          "onChartLegendOptions": {
            "dimensionInLegend": null,
            "showLegend": false
          },
          "programOptions": {
            "disableSampling": false,
            "maxDelay": 0,
            "minimumResolution": 10000,
            "timezone": null
          },
          "publishLabelOptions": [
            {
              "displayName": "Successful requests",
              "label": "A",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "All requests",
              "label": "B",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": null,
              "valueUnit": null,
              "yAxis": 0
            },
            {
              "displayName": "Error Rate",
              "label": "C",
              "paletteIndex": null,
              "plotType": null,
              "valuePrefix": null,
              "valueSuffix": "%",
              "valueUnit": null,
              "yAxis": 0
            }
          ],
          "showEventLines": false,
          "stacked": false,
          "time": {
            "range": 3600000,
            "type": "relative"
          },
          "type": "TimeSeriesChart",
          "unitPrefix": "Metric"
        },
        "packageSpecifications": "",
        "programText": "filter_ = filter('sf_environment', '*') and filter('sf_workflow', '*') and (not filter('sf_dimensionalized', '*'))\nA = data('workflows.count', filter=filter_ and filter('sf_error', 'true'), rollup='rate').sum(by=['sf_environment', 'sf_workflow']).publish(label='A', enable=False)\nB = data('workflows.count', filter=filter_, rollup='rate').sum(by=['sf_environment', 'sf_workflow']).publish(label='B', enable=False)\nC = combine(100*((A if A is not None else 0)/B)).publish(label='C')",
        "relatedDetectorIds": [],
        "tags": null
      }
    }
  ],
  "crossLinkExports": [
    {
      "crossLink": {
        "aliases": null,
        "created": 0,
        "creator": null,
        "id": "EppsqAwAYAE",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "propertyName": "sf_workflow",
        "targets": [
          {
            "dashboardGroupId": "Em-XVZjAYCs",
            "dashboardId": "Em-XVZjAYDY",
            "isDefault": true,
            "name": "APM Business Workflow",
            "type": "INTERNAL_LINK"
          }
        ]
      }
    },
    {
      "crossLink": {
        "aliases": null,
        "contextId": "Em-XVZjAYC4",
        "created": 0,
        "creator": null,
        "id": "Em-XVZjAYD4",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "propertyName": "sf_workflow",
        "targets": [
          {
            "dashboardGroupId": "Em-XVZjAYCs",
            "dashboardId": "Em-XVZjAYDY",
            "isDefault": true,
            "name": "Workflow Name",
            "type": "INTERNAL_LINK"
          }
        ]
      }
    }
  ],
  "dashboardExports": [
    {
      "dashboard": {
        "chartDensity": "HIGHEST",
        "charts": [
          {
            "chartId": "Em-XVZjAYDI",
            "column": 0,
            "height": 1,
            "row": 0,
            "width": 6
          },
          {
            "chartId": "Em-XVZjAYC8",
            "column": 6,
            "height": 1,
            "row": 0,
            "width": 6
          },
          {
            "chartId": "Em-XVZjAYDA",
            "column": 0,
            "height": 1,
            "row": 1,
            "width": 6
          },
          {
            "chartId": "Em-XVZjAYDE",
            "column": 6,
            "height": 1,
            "row": 1,
            "width": 6
          },
          {
            "chartId": "Em-XVZjAYDQ",
            "column": 6,
            "height": 1,
            "row": 2,
            "width": 6
          },
          {
            "chartId": "Em-XVZjAYDM",
            "column": 0,
            "height": 1,
            "row": 2,
            "width": 6
          }
        ],
        "created": 0,
        "creator": null,
        "customProperties": null,
        "description": "",
        "discoveryOptions": null,
        "eventOverlays": null,
        "filters": {
          "sources": null,
          "time": {
            "end": "Now",
            "start": "-1h"
          },
          "variables": [
            {
              "alias": "Environment",
              "applyIfExists": false,
              "description": "Environment",
              "preferredSuggestions": [],
              "property": "sf_environment",
              "propertyMappings": [
                "sf_environment"
              ],
              "replaceOnly": false,
              "required": true,
              "restricted": false,
              "value": [
                "Choose Environment"
              ]
            }
          ]
        },
        "groupId": "Em-XVZjAYCs",
        "id": "Em-XVZjAYC4",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "maxDelayOverride": null,
        "name": "Workflows Overview",
        "selectedEventOverlays": [],
        "tags": null
      }
    },
    {
      "dashboard": {
        "chartDensity": "DEFAULT",
        "charts": [
          {
            "chartId": "Em-XVZjAYDg",
            "column": 0,
            "height": 1,
            "row": 0,
            "width": 4
          },
          {
            "chartId": "Em-XVZjAYDc",
            "column": 4,
            "height": 1,
            "row": 0,
            "width": 8
          },
          {
            "chartId": "Em-XVZjAYDo",
            "column": 0,
            "height": 1,
            "row": 1,
            "width": 4
          },
          {
            "chartId": "Em-XVZjAYDs",
            "column": 4,
            "height": 1,
            "row": 1,
            "width": 8
          },
          {
            "chartId": "Em-XVZjAYDk",
            "column": 0,
            "height": 1,
            "row": 2,
            "width": 4
          },
          {
            "chartId": "Em-XVZjAYDw",
            "column": 4,
            "height": 1,
            "row": 2,
            "width": 8
          }
        ],
        "created": 0,
        "creator": null,
        "customProperties": null,
        "description": "",
        "discoveryOptions": null,
        "eventOverlays": [],
        "filters": {
          "sources": null,
          "time": {
            "end": "Now",
            "start": "-1h"
          },
          "variables": [
            {
              "alias": "Environment",
              "applyIfExists": false,
              "description": "Environment",
              "preferredSuggestions": [],
              "property": "sf_environment",
              "propertyMappings": [
                "sf_environment"
              ],
              "replaceOnly": true,
              "required": true,
              "restricted": false,
              "value": [
                "Choose Environment"
              ]
            },
            {
              "alias": "Workflow",
              "applyIfExists": false,
              "description": "APM Workflow Name",
              "preferredSuggestions": [],
              "property": "sf_workflow",
              "propertyMappings": [
                "sf_workflow"
              ],
              "replaceOnly": true,
              "required": true,
              "restricted": false,
              "value": [
                "Choose Workflow"
              ]
            }
          ]
        },
        "groupId": "Em-XVZjAYCs",
        "id": "Em-XVZjAYDY",
        "lastUpdated": 0,
        "lastUpdatedBy": null,
        "maxDelayOverride": null,
        "name": "Workflow Details",
        "selectedEventOverlays": [],
        "tags": null
      }
    }
  ],
  "groupExport": {
    "group": {
      "created": 0,
      "creator": null,
      "dashboards": [
        "Em-XVZjAYC4",
        "Em-XVZjAYDY"
      ],
      "description": "APM Business Workflows dashboards",
      "email": null,
      "id": "Em-XVZjAYCs",
      "importQualifiers": [
        {
          "filters": [
            {
              "not": false,
              "property": "sf_environment",
              "values": []
            }
          ],
          "metric": "workflows.count"
        }
      ],
      "lastUpdated": 0,
      "lastUpdatedBy": null,
      "name": "APM Business Workflows",
      "teams": null
    }
  },
  "hashCode": -2050758111,
  "id": "Em-XVZjAYCs",
  "modelVersion": 1,
  "packageType": "GROUP"
}